{{ $contacts := getJSON "data/contacts.json" }}
<div class="h-content-tabs bg-white">
  <div
    x-data="{
    contacts: {{ $contacts | jsonify }},
    colSearch: false,
    sortColumn: 'name',
    sortDirection: 'asc',
    searchTerms: {},
    sortedContacts: [],
    

    
    sortContacts: function() {
      if (this.sortColumn === '') {
        return this.contacts;
      }
      
      return this.contacts.sort((a, b) => {
        if (this.sortDirection === 'asc') {
          return a[this.sortColumn] > b[this.sortColumn] ? 1 : -1;
        } else {
          return a[this.sortColumn] < b[this.sortColumn] ? 1 : -1;
        }
      });
    },

    filteredContacts: function() {
      return this.contacts.filter((contact) => {
        return Object.keys(this.searchTerms).every((column) => {
          const searchTerm = this.searchTerms[column];
          if (!searchTerm) return true;
          const value = contact[column] ? contact[column].toString().toLowerCase() : '';
          return value.includes(searchTerm.toLowerCase());
        });
      });
    },

    options: function(key) {
      const values = new Set();
      this.contacts.forEach((contact) => {
        if (contact[key]) {
          values.add(contact[key]);
        }
      });
      return Array.from(values).map((value, index) => {
        return { value: index + 1, label: value };
      });
    },
    updateSortedContacts: function() {
      this.sortedContacts = this.sortContacts();
    },

    columnWidths: JSON.parse(localStorage.getItem('columnWidths')) || {},

    saveColumnWidths: function() {
      localStorage.setItem('columnWidths', JSON.stringify(this.columnWidths));
      console.log('Column widths saved:', this.columnWidths);
    },

    calculateColumnWidths: function() {
      const table = this.$refs.myTable;
      if (!table) return;

      const headers = table.querySelectorAll('th');
      console.log('headers:', headers.length);
      
      this.columnWidths = JSON.parse(localStorage.getItem('columnWidths')) || {};

      console.log('Stored column widths:', this.columnWidths);
      
      for (let i = 0; i < headers.length; i++) {
        
        
        const header = headers[i];
        const key = header.getAttribute('data-column');
        console.log('key:', key);
        if (!key) continue;
        
        const width = this.columnWidths[key];
        console.log('this.columnWidths:', width);
        if (width) {
          header.style.width = width;
        } else {
          const clientWidth = header.clientWidth;
          header.style.width = clientWidth + 'px';
          this.columnWidths[key] = clientWidth + 'px';
        }
      }

      console.log('Updated column widths:', this.columnWidths);

      this.saveColumnWidths(); // Call the saveColumnWidths function to save the column widths
    }

  }"
    id="myApp"
    x-init="updateSortedContacts(), calculateColumnWidths()"
    class="d-flex h-100 flex-column"
  >
    {{ $filters := 0 }}
    {{ if $filters }}
      {{ partial "filters.html" . }}
    {{ end }}


    <div class="filters sticky-top clear bg-white p-1">
      <div class="d-flex gap-1">
        {{ $choiches := 0 }}
        {{ if $choiches }}
          <div>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
            <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
            <div
              x-data="{
            multiple: false,
            value: 1,
            options: options('name'),
            init() {
            this.$nextTick(() => {
            let choices = new Choices(this.$refs.select)
  
            let refreshChoices = () => {
            let selection = this.multiple ? this.value : [this.value]
  
            choices.clearStore()
            choices.setChoices(this.options.map(({ value, label }) => ({
            value,
            label,
            selected: selection.includes(value),
            })))
            }
  
            refreshChoices()
  
            this.$refs.select.addEventListener('change', () => {
            this.value = choices.getValue(true)
            })
  
            this.$watch('value', () => refreshChoices())
            this.$watch('options', () => refreshChoices())
            })
            }
            }"
              class="min-w-20rem w-full max-w-sm"
            >
              <select x-ref="select" :multiple="multiple"></select>
            </div>
          </div>
        {{ end }}


        <button x-on:click="colSearch = !colSearch" class="btn btn-sm btn-soft-secondary d-flex align-items-center gap-2">
          <span x-show="!colSearch"> Show </span>
          <span x-show="colSearch"> Hide </span>
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
      </div>
    </div>
    <div class="flex-grow-1 h-100 scroll scroll--light  overflow-y-scroll">
      <table id="THEAD" x-ref="myTable" class=" table-hover table-sm table">
        <thead class="thead-dark shadow">
          <tr>
            <th data-column="check" x-bind:style="{ width: columnWidths.name }" scope="col" class="align-top"></th>
            <th data-column="name" x-bind:style="{ width: columnWidths.name }" scope="col" class="align-top">
              <div class="d-flex flex-column align-items-stretch h-100">
                <div class="d-flex">
                  <button class="b-0 border-0 bg-transparent p-0" x-on:click="sortColumn = 'name'; sortDirection = (sortColumn === 'name' && sortDirection === 'asc') ? 'desc' : 'asc'; updateSortedContacts()">
                    <i x-show="sortColumn !== 'name'" class="not-sorted fa-light fa-sort mr-2 text-white"></i>
                    <i x-show="sortColumn === 'name' && sortDirection === 'desc'" class="desc fa-light fa-sort-down mr-2 text-white"></i>
                    <i x-show="sortColumn === 'name' && sortDirection === 'asc'" class="asc fa-light fa-sort-up mr-2 text-white"></i>
                  </button>
                  Name
                </div>
                <div x-show="colSearch" class="pt-1">
                  {{/* <div
                    x-data="{
                    multiple: false,
                    value: 1,
                    options: options('name'),
                    init() {
                    this.$nextTick(() => {
                    let choices = new Choices(this.$refs.select)

                    let refreshChoices = () => {
                    let selection = this.multiple ? this.value : [this.value]

                    choices.clearStore()
                    choices.setChoices(this.options.map(({ value, label }) => ({
                    value,
                    label,
                    selected: selection.includes(value),
                    })))
                    }

                    refreshChoices()

                    this.$refs.select.addEventListener('change', () => {
                    this.value = choices.getValue(true)
                    })

                    this.$watch('value', () => refreshChoices())
                    this.$watch('options', () => refreshChoices())
                    })
                    }
                    }"
                    class="min-w-20rem text-dark w-full max-w-sm"
                    >
                    <select x-model="searchTerms.name" x-ref="select" :multiple="multiple"></select>
                    </div>
                  */}}


                  <input class="form-control form-control-sm" type="text" x-model="searchTerms.name" placeholder="Search name..." />
                </div>
              </div>
            </th>
            <th data-column="contactType" x-bind:style="{ width: columnWidths.name }" scope="col" class="align-top">
              <div class="d-flex flex-column align-items-stretch h-100">
                <div class="d-flex">
                  <button class="b-0 border-0 bg-transparent p-0" x-on:click="sortColumn = 'contactType'; sortDirection = (sortColumn === 'contactType' && sortDirection === 'asc') ? 'desc' : 'asc'; updateSortedContacts()">
                    <i x-show="sortColumn !== 'contactType'" class="not-sorted fa-light fa-sort mr-2 text-white"></i>
                    <i x-show="sortColumn === 'contactType' && sortDirection === 'desc'" class="desc fa-light fa-sort-down mr-2 text-white"></i>
                    <i x-show="sortColumn === 'contactType' && sortDirection === 'asc'" class="asc fa-light fa-sort-up mr-2 text-white"></i>
                  </button>
                  Type
                </div>
              </div>
              <div x-show="colSearch" class="pt-1">
                <input class="form-control form-control-sm" type="text" x-model="searchTerms.contactType" placeholder="Search type..." />
              </div>
            </th>
            <th data-column="lastContacted" x-bind:style="{ width: columnWidths.name }" scope="col" class="align-top">
              <div class="d-flex flex-column align-items-stretch h-100">
                <div class="d-flex">
                  <button class="b-0 border-0 bg-transparent p-0" x-on:click="sortColumn = 'lastContacted'; sortDirection = (sortColumn === 'lastContacted' && sortDirection === 'asc') ? 'desc' : 'asc'; updateSortedContacts()">
                    <i x-show="sortColumn !== 'lastContacted'" class="not-sorted fa-light fa-sort mr-2 text-white"></i>
                    <i x-show="sortColumn === 'lastContacted' && sortDirection === 'desc'" class="desc fa-light fa-sort-down mr-2 text-white"></i>
                    <i x-show="sortColumn === 'lastContacted' && sortDirection === 'asc'" class="asc fa-light fa-sort-up mr-2 text-white"></i>
                  </button>
                  Last Contacted
                </div>
              </div>
            </th>
            <th data-column="lastFTFmeeting" x-bind:style="{ width: columnWidths.name }" scope="col" class="align-top">
              <button class="b-0 border-0 bg-transparent p-0" x-on:click="sortColumn = 'lastFTFmeeting'; sortDirection = (sortColumn === 'lastFTFmeeting' && sortDirection === 'asc') ? 'desc' : 'asc'; updateSortedContacts()">
                <i x-show="sortColumn !== 'lastFTFmeeting'" class="not-sorted fa-light fa-sort mr-2 text-white"></i>
                <i x-show="sortColumn === 'lastFTFmeeting' && sortDirection === 'desc'" class="desc fa-light fa-sort-down mr-2 text-white"></i>
                <i x-show="sortColumn === 'lastFTFmeeting' && sortDirection === 'asc'" class="asc fa-light fa-sort-up mr-2 text-white"></i>
              </button>
              Last FTF Meeting
            </th>
            <th data-column="stage" x-bind:style="{ width: columnWidths.name }" scope="col" class="align-top">
              <button class="b-0 border-0 bg-transparent p-0" x-on:click="sortColumn = 'stage'; sortDirection = (sortColumn === 'stage' && sortDirection === 'asc') ? 'desc' : 'asc'; updateSortedContacts()">
                <i x-show="sortColumn !== 'stage'" class="not-sorted fa-light fa-sort mr-2 text-white"></i>
                <i x-show="sortColumn === 'stage' && sortDirection === 'desc'" class="desc fa-light fa-sort-down mr-2 text-white"></i>
                <i x-show="sortColumn === 'stage' && sortDirection === 'asc'" class="asc fa-light fa-sort-up mr-2 text-white"></i>
              </button>
              Stage

              <div x-show="colSearch" class="pt-1">
                <input class="form-control form-control-sm" type="text" x-model="searchTerms.stage" placeholder="Search stage..." />
              </div>
            </th>
            <th data-column="assets" x-bind:style="{ width: columnWidths.name }" scope="col" class="align-top">
              <div class="d-flex justify-content-end align-items-center w-100 gap-2">
                Assets

                <button class="b-0 border-0 bg-transparent p-0" x-on:click="sortColumn = 'assets'; sortDirection = (sortColumn === 'assets' && sortDirection === 'asc') ? 'desc' : 'asc'; updateSortedContacts()">
                  <i x-show="sortColumn !== 'assets'" class="not-sorted fa-light fa-sort mr-2 text-white"></i>
                  <i x-show="sortColumn === 'assets' && sortDirection === 'desc'" class="desc fa-light fa-sort-down mr-2 text-white"></i>
                  <i x-show="sortColumn === 'assets' && sortDirection === 'asc'" class="asc fa-light fa-sort-up mr-2 text-white"></i>
                </button>
              </div>
            </th>
            <th data-column="actions" x-bind:style="{ width: columnWidths.name }" scope="col" class="align-top"></th>
          </tr>
        </thead>

        <tbody>
          {{/* <template x-for="contact in sortedContacts" :key="contact.name"> */}}
          <template x-for="contact in filteredContacts" :key="contact.name">
            <tr x-data="{show: false, minimized: false, contactSize: 'details', windowSideOpen: false}">
              <td class="pl-2 text-center align-middle">
                <input type="checkbox" aria-label="Checkbox for following text input" />
              </td>
              <td class="align-middle">
                <button class="text-decoration-none btn btn-sm btn-link d-flex align-items-center w-100 mr-1 gap-2" x-on:click="show = !show, minimized = false ">
                  <i x-show="!show" class="fa-regular fa-circle-info text-muted"></i>
                  <i x-show="show && (contactSize != 'summary' || contactSize != 'details')" class="fa-solid fa-circle-info"></i>
                  <strong x-text="contact.name"></strong>
                  {{/* <span x-text="contactSize + ', min ' + minimized + ', size ' + contactSize"></span> */}}
                </button>

                <template x-if="contactSize === 'details' && show">
                  <template x-teleport="body">
                    <div class="backdrop" x-on:click="show = !show"></div>
                  </template>
                </template>
                <template x-if="show">
                  <div>
                    <template x-teleport="#itemLists_details">
                      <template x-if="contactSize === 'details'">
                        <div class="d-flex window" @click.outside="contactSize = 'summary'">
                          <div class="d-flex w-100 flex-column card-main card-main-primary rounded bg-white shadow">
                            <div x-ref="windowToolbarHeight" @transitionend.window="calculateHeight('windowToolbarHeight')" class="d-flex justify-content-between align-items-center w-100 px-1">
                              <button x-on:click="contactSize = 'details'" class="d-flex align-items-center text-primary flex-nowrap border-0 bg-transparent px-2 py-2">
                                <i class="fa-regular fa-arrow-up-right-from-square mr-2"></i>
                                <strong class="text-nowrap pr-2" x-text="contact.name"> </strong>
                                {{/* <span x-text="contactSize + ', min ' + minimized + ', size ' + contactSize"></span> */}}
                              </button>
                              <div class="d-flex justify-content-between align-items-center">
                                <button class="text-primary border-0 bg-transparent px-2 py-2" x-on:click="show = false"><i class="fa-regular fa-ellipsis"></i></button>
                                <button class="text-primary border-0 bg-transparent px-2 py-2" x-on:click="windowSideOpen = !windowSideOpen">
                                  <i class=" fa-circle-info" :class="windowSideOpen ? 'fa-solid' : 'fa-regular'"></i>
                                </button>
                                <button class="text-primary border-0 bg-transparent py-2" x-on:click="contactSize = ''"><i class="fa-regular fa-down-left-and-up-right-to-center"></i></button>
                                <div class="separator separator__gray mx-2">&nbsp;</div>
                                <button class="text-primary border-0 bg-transparent px-2 py-2" x-on:click="show = false"><i class="fa-regular fa-xmark"></i></button>
                              </div>
                            </div>
                            <div class="flex-grow-1 d-flex overflow-hidden">
                              <div class="d-flex border-top h-100 w-100">
                                <main class="flex-grow-1 d-flex flex-column h-100" x-bind:class="{ 'mainWithSide': windowSideOpen, 'w-100': !windowSideOpen }">
                                  <div
                                    x-data="{
                                    selectedId: null,
                                    init() {
                                        // Set the first available tab on the page on page load.
                                        this.$nextTick(() => this.select(this.$id('tab', 1)))
                                    },
                                    select(id) {
                                        this.selectedId = id
                                    },
                                    isSelected(id) {
                                        return this.selectedId === id
                                    },
                                    whichChild(el, parent) {
                                        return Array.from(parent.children).indexOf(el) + 1
                                    }
                                }"
                                    x-id="['tab']"
                                    class="tabs d-flex flex-column"
                                  >
                                    <!-- Tab List -->
                                    <ul x-ref="windowModalTab" @transitionend.window="calculateHeight('windowModalTab')" @keydown.right.prevent.stop="$focus.wrap().next()" @keydown.home.prevent.stop="$focus.first()" @keydown.page-up.prevent.stop="$focus.first()" @keydown.left.prevent.stop="$focus.wrap().prev()" @keydown.end.prevent.stop="$focus.last()" @keydown.page-down.prevent.stop="$focus.last()" role="windowModalTab" class="d-flex list-unstyled border-bottom m-0">
                                      <!-- Tab -->
                                      <li>
                                        <button :id="$id('tab', whichChild($el.parentElement, $refs.windowModalTab))" @click="select($el.id)" @mousedown.prevent="" @focus="select($el.id)" type="button" :tabindex="isSelected($el.id) ? 0 : -1" :aria-selected="isSelected($el.id)" :class="isSelected($el.id) ? 'btn-primary' : 'btn-link'" class="btn btn-lg rounded-0 border-0" role="tab">
                                          <small> Overview </small>
                                        </button>
                                      </li>

                                      <li>
                                        <button :id="$id('tab', whichChild($el.parentElement, $refs.windowModalTab))" @click="select($el.id)" @mousedown.prevent="" @focus="select($el.id)" type="button" :tabindex="isSelected($el.id) ? 0 : -1" :aria-selected="isSelected($el.id)" :class="isSelected($el.id) ? 'btn-primary' : 'btn-link'" class="btn btn-lg rounded-0 border-0" role="tab">
                                          <small> Relationship </small>
                                        </button>
                                      </li>
                                      <li>
                                        <button :id="$id('tab', whichChild($el.parentElement, $refs.windowModalTab))" @click="select($el.id)" @mousedown.prevent="" @focus="select($el.id)" type="button" :tabindex="isSelected($el.id) ? 0 : -1" :aria-selected="isSelected($el.id)" :class="isSelected($el.id) ? 'btn-primary' : 'btn-link'" class="btn btn-lg rounded-0 border-0" role="tab">
                                          <small> KYC Information </small>
                                        </button>
                                      </li>
                                    </ul>

                                    <!-- Panels -->
                                    <div class="flex-grow-1 h-100 overflow-hidden">
                                      <div role="tabpanels" class="">
                                        <!-- Panel -->
                                        <section x-show="isSelected($id('tab', whichChild($el, $el.parentElement)))" :aria-labelledby="$id('tab', whichChild($el, $el.parentElement))" role="tabpanel" class="windowModalTabContent scroll scroll--light  overflow-auto">
                                          <div class="d-flex">
                                            <side class="windowModalTabContent scroll scroll--light border-right min-side-internal-w overflow-y-scroll">
                                              <div class="pb-2 ">
                                                <div class="d-flex justify-content-between align-items-center px-2 pt-3">
                                                  <h6 class="d-flex align-items-cente mb-0">
                                                    <i class="fa-solid fa-bolt text-info mr-2"></i>
                                                    <span> Key Dates </span>
                                                  </h6>
                                                  <div class="d-flex justify-content-between align-items-cente gap-2">
                                                    <a href="#">
                                                      <i class="fa-solid fa-rotate"></i>
                                                    </a>
                                                    <a href="#">
                                                      <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                    </a>
                                                  </div>
                                                </div>
                                                <div class="d-flex mt-2 gap-2 px-2 py-2">
                                                  <div class="card w-33 d-flex flex-column justify-content-center flex-grow-1 px-2 py-3">
                                                    <p class="mb-0">Last Communication</p>
                                                    <h6 class="text-info-11">23/05/1976</h6>
                                                  </div>
                                                  <div class="card w-33 d-flex flex-column justify-content-center flex-grow-1 px-2 py-3">
                                                    <p class="mb-0">Last Meeting</p>
                                                    <h6 class="text-info-11">23/05/1976</h6>
                                                  </div>
                                                  <div class="card w-33 d-flex flex-column justify-content-center flex-grow-1 px-2 py-3">
                                                    <p class="mb-0">Next Meeting</p>
                                                    <h6 class="text-info-11">23/05/1976</h6>
                                                  </div>
                                                </div>
                                              </div>
                                              <hr class="m-0" />
                                              <div class="d-flex justify-content-between align-items-center xpt-3 px-2 py-2">
                                                <h6 class="d-flex align-items-cente mb-0 ">
                                                  <i class="fa-regular fa-calendar text-info mr-2"></i>
                                                  <span> Upcoming Activities </span>
                                                </h6>
                                                <div class="d-flex justify-content-between align-items-cente gap-2">
                                                  <a href="#">
                                                    <i class="fa-solid fa-rotate"></i>
                                                  </a>
                                                  <a href="#">
                                                    <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                  </a>
                                                </div>
                                              </div>
                                              <div class="sticky-top vertical-gradient w-100 p-2">
                                                <div class="d-flex w-100 xborder-bottom xborder-top xrounded overflow-hidden border bg-white">
                                                  <button class="btn d-flex flex-grow-1 flex-column justify-content-center align-items-center rounded-0 btn-primary">
                                                    <span> My pendings </span>
                                                    <span class="badge badge-pill badge-soft-info mt-2">+99</span>
                                                  </button>
                                                  <button class="btn d-flex border-right flex-grow-1 flex-column justify-content-center align-items-center rounded-0 btn-link font-weight-normal">
                                                    <span> All pendings </span>
                                                    <span class="badge badge-pill badge-soft-info mt-2">+99</span>
                                                  </button>
                                                  <button class="btn d-flex border-right flex-grow-1 flex-column justify-content-center align-items-center rounded-0 btn-link font-weight-normal">
                                                    <span> Upcoming </span>
                                                    <span class="badge badge-pill badge-soft-info mt-2">+99</span>
                                                  </button>
                                                  <button class="btn d-flex flex-grow-1 flex-column justify-content-center align-items-center rounded-0 btn-link font-weight-normal">
                                                    <span> Overdue </span>
                                                    <span class="badge badge-pill badge-soft-info mt-2">+99</span>
                                                  </button>
                                                </div>
                                              </div>
                                              <div class="px-2">
                                                <ul class="list-unstyled d-flex flex-column gap-2">
                                                  <li>
                                                    <div class="card xbg-soft-info d-flex flex-row p-2">
                                                      <div class="d-flex gap-2">
                                                        <div>
                                                          <div class="xbg-info rounded p-3">
                                                            <i class="fa-solid fa-rotate"></i>
                                                          </div>
                                                        </div>
                                                        <p class="mb-0">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Beatae praesentium adipisci sit ut nulla incidunt nisi ipsa doloremque? Omnis repellat incidunt sit esse suscipit obcaecati veniam consequuntur molestias labore eum.</p>
                                                      </div>
                                                      <div class="d-flex justify-content-between align-items-cente gap-2">
                                                        <a href="#">
                                                          <i class="fa-solid fa-rotate"></i>
                                                        </a>
                                                        <a href="#">
                                                          <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                        </a>
                                                      </div>
                                                    </div>
                                                  </li>
                                                  <li>
                                                    <div class="card xbg-soft-info d-flex flex-row p-2">
                                                      <div class="d-flex gap-2">
                                                        <div>
                                                          <div class="xbg-info rounded p-3">
                                                            <i class="fa-solid fa-rotate"></i>
                                                          </div>
                                                        </div>
                                                        <p class="mb-0">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Beatae praesentium adipisci sit ut nulla incidunt nisi ipsa doloremque? Omnis repellat incidunt sit esse suscipit obcaecati veniam consequuntur molestias labore eum.</p>
                                                      </div>
                                                      <div class="d-flex justify-content-between align-items-cente gap-2">
                                                        <a href="#">
                                                          <i class="fa-solid fa-rotate"></i>
                                                        </a>
                                                        <a href="#">
                                                          <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                        </a>
                                                      </div>
                                                    </div>
                                                  </li>
                                                  <li>
                                                    <div class="card xbg-soft-info d-flex flex-row p-2">
                                                      <div class="d-flex gap-2">
                                                        <div>
                                                          <div class="xbg-info rounded p-3">
                                                            <i class="fa-solid fa-rotate"></i>
                                                          </div>
                                                        </div>
                                                        <p class="mb-0">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Beatae praesentium adipisci sit ut nulla incidunt nisi ipsa doloremque? Omnis repellat incidunt sit esse suscipit obcaecati veniam consequuntur molestias labore eum.</p>
                                                      </div>
                                                      <div class="d-flex justify-content-between align-items-cente gap-2">
                                                        <a href="#">
                                                          <i class="fa-solid fa-rotate"></i>
                                                        </a>
                                                        <a href="#">
                                                          <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                        </a>
                                                      </div>
                                                    </div>
                                                  </li>
                                                  <li>
                                                    <div class="card xbg-soft-info d-flex flex-row p-2">
                                                      <div class="d-flex gap-2">
                                                        <div>
                                                          <div class="xbg-info rounded p-3">
                                                            <i class="fa-solid fa-rotate"></i>
                                                          </div>
                                                        </div>
                                                        <p class="mb-0">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Beatae praesentium adipisci sit ut nulla incidunt nisi ipsa doloremque? Omnis repellat incidunt sit esse suscipit obcaecati veniam consequuntur molestias labore eum.</p>
                                                      </div>
                                                      <div class="d-flex justify-content-between align-items-cente gap-2">
                                                        <a href="#">
                                                          <i class="fa-solid fa-rotate"></i>
                                                        </a>
                                                        <a href="#">
                                                          <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                        </a>
                                                      </div>
                                                    </div>
                                                  </li>
                                                  <li>
                                                    <div class="card xbg-soft-info d-flex flex-row p-2">
                                                      <div class="d-flex gap-2">
                                                        <div>
                                                          <div class="xbg-info rounded p-3">
                                                            <i class="fa-solid fa-rotate"></i>
                                                          </div>
                                                        </div>
                                                        <p class="mb-0">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Beatae praesentium adipisci sit ut nulla incidunt nisi ipsa doloremque? Omnis repellat incidunt sit esse suscipit obcaecati veniam consequuntur molestias labore eum.</p>
                                                      </div>
                                                      <div class="d-flex justify-content-between align-items-cente gap-2">
                                                        <a href="#">
                                                          <i class="fa-solid fa-rotate"></i>
                                                        </a>
                                                        <a href="#">
                                                          <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                        </a>
                                                      </div>
                                                    </div>
                                                  </li>
                                                  <li>
                                                    <div class="card xbg-soft-info d-flex flex-row p-2">
                                                      <div class="d-flex gap-2">
                                                        <div>
                                                          <div class="xbg-info rounded p-3">
                                                            <i class="fa-solid fa-rotate"></i>
                                                          </div>
                                                        </div>
                                                        <p class="mb-0">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Beatae praesentium adipisci sit ut nulla incidunt nisi ipsa doloremque? Omnis repellat incidunt sit esse suscipit obcaecati veniam consequuntur molestias labore eum.</p>
                                                      </div>
                                                      <div class="d-flex justify-content-between align-items-cente gap-2">
                                                        <a href="#">
                                                          <i class="fa-solid fa-rotate"></i>
                                                        </a>
                                                        <a href="#">
                                                          <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                        </a>
                                                      </div>
                                                    </div>
                                                  </li>
                                                  <li>
                                                    <div class="card xbg-soft-info d-flex flex-row p-2">
                                                      <div class="d-flex gap-2">
                                                        <div>
                                                          <div class="xbg-info rounded p-3">
                                                            <i class="fa-solid fa-rotate"></i>
                                                          </div>
                                                        </div>
                                                        <p class="mb-0">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Beatae praesentium adipisci sit ut nulla incidunt nisi ipsa doloremque? Omnis repellat incidunt sit esse suscipit obcaecati veniam consequuntur molestias labore eum.</p>
                                                      </div>
                                                      <div class="d-flex justify-content-between align-items-cente gap-2">
                                                        <a href="#">
                                                          <i class="fa-solid fa-rotate"></i>
                                                        </a>
                                                        <a href="#">
                                                          <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                        </a>
                                                      </div>
                                                    </div>
                                                  </li>
                                                  <li>
                                                    <div class="card xbg-soft-info d-flex flex-row p-2">
                                                      <div class="d-flex gap-2">
                                                        <div>
                                                          <div class="xbg-info rounded p-3">
                                                            <i class="fa-solid fa-rotate"></i>
                                                          </div>
                                                        </div>
                                                        <p class="mb-0">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Beatae praesentium adipisci sit ut nulla incidunt nisi ipsa doloremque? Omnis repellat incidunt sit esse suscipit obcaecati veniam consequuntur molestias labore eum.</p>
                                                      </div>
                                                      <div class="d-flex justify-content-between align-items-cente gap-2">
                                                        <a href="#">
                                                          <i class="fa-solid fa-rotate"></i>
                                                        </a>
                                                        <a href="#">
                                                          <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                        </a>
                                                      </div>
                                                    </div>
                                                  </li>
                                                  <li>
                                                    <div class="card xbg-soft-info d-flex flex-row p-2">
                                                      <div class="d-flex gap-2">
                                                        <div>
                                                          <div class="xbg-info rounded p-3">
                                                            <i class="fa-solid fa-rotate"></i>
                                                          </div>
                                                        </div>
                                                        <p class="mb-0">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Beatae praesentium adipisci sit ut nulla incidunt nisi ipsa doloremque? Omnis repellat incidunt sit esse suscipit obcaecati veniam consequuntur molestias labore eum.</p>
                                                      </div>
                                                      <div class="d-flex justify-content-between align-items-cente gap-2">
                                                        <a href="#">
                                                          <i class="fa-solid fa-rotate"></i>
                                                        </a>
                                                        <a href="#">
                                                          <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                        </a>
                                                      </div>
                                                    </div>
                                                  </li>
                                                  <li>
                                                    <div class="card xbg-soft-info d-flex flex-row p-2">
                                                      <div class="d-flex gap-2">
                                                        <div>
                                                          <div class="xbg-info rounded p-3">
                                                            <i class="fa-solid fa-rotate"></i>
                                                          </div>
                                                        </div>
                                                        <p class="mb-0">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Beatae praesentium adipisci sit ut nulla incidunt nisi ipsa doloremque? Omnis repellat incidunt sit esse suscipit obcaecati veniam consequuntur molestias labore eum.</p>
                                                      </div>
                                                      <div class="d-flex justify-content-between align-items-cente gap-2">
                                                        <a href="#">
                                                          <i class="fa-solid fa-rotate"></i>
                                                        </a>
                                                        <a href="#">
                                                          <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                        </a>
                                                      </div>
                                                    </div>
                                                  </li>
                                                  <li>
                                                    <div class="card xbg-soft-info d-flex flex-row p-2">
                                                      <div class="d-flex gap-2">
                                                        <div>
                                                          <div class="xbg-info rounded p-3">
                                                            <i class="fa-solid fa-rotate"></i>
                                                          </div>
                                                        </div>
                                                        <p class="mb-0">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Beatae praesentium adipisci sit ut nulla incidunt nisi ipsa doloremque? Omnis repellat incidunt sit esse suscipit obcaecati veniam consequuntur molestias labore eum.</p>
                                                      </div>
                                                      <div class="d-flex justify-content-between align-items-cente gap-2">
                                                        <a href="#">
                                                          <i class="fa-solid fa-rotate"></i>
                                                        </a>
                                                        <a href="#">
                                                          <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                        </a>
                                                      </div>
                                                    </div>
                                                  </li>
                                                </ul>
                                              </div>
                                            </side>
                                            <div class="flex-grow-1 windowModalTabContent scroll scroll--light overflow-y-scroll">
                                              <div class="px-2">
                                                <div class="d-flex justify-content-between align-items-center px-2 pt-3">
                                                  <h6 class="d-flex align-items-cente mb-0">
                                                    <i class="fa-solid fa-timeline text-info mr-2"></i>
                                                    <span> Timeline V1</span>
                                                  </h6>
                                                  <div class="d-flex justify-content-between align-items-cente gap-2">
                                                    <a href="#">
                                                      <i class="fa-solid fa-rotate"></i>
                                                    </a>
                                                    <a href="#">
                                                      <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                    </a>
                                                  </div>
                                                </div>
                                                <div class="w-100 xoverflow-hidden py-3">
                                                  {{ partial "timeline-v1.html" . }}
                                                </div>

                                                <div class="flex-grow-1 card card-main card-main-info mt-3 px-3 py-3">
                                                  <div class="d-flex justify-content-between align-items-center">
                                                    <h6 class="d-flex align-items-cente mb-0">
                                                      <i class="fa-solid fa-bolt text-info mr-2"></i>
                                                      <span> Key Dates </span>
                                                    </h6>
                                                    <div class="d-flex justify-content-between align-items-cente gap-2">
                                                      <a href="#">
                                                        <i class="fa-solid fa-rotate"></i>
                                                      </a>
                                                      <a href="#">
                                                        <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                      </a>
                                                    </div>
                                                  </div>
                                                  <div class="d-flex mt-2 gap-2 py-2">
                                                    <div class="card w-33 d-flex flex-column justify-content-center flex-grow-1 px-2 py-3">
                                                      <p class="mb-0">Last Communication</p>
                                                      <h6 class="text-info-11">23/05/1976</h6>
                                                    </div>
                                                    <div class="card w-33 d-flex flex-column justify-content-center flex-grow-1 px-2 py-3">
                                                      <p class="mb-0">Last Meeting</p>
                                                      <h6 class="text-info-11">23/05/1976</h6>
                                                    </div>
                                                    <div class="card w-33 d-flex flex-column justify-content-center flex-grow-1 px-2 py-3">
                                                      <p class="mb-0">Next Meeting</p>
                                                      <h6 class="text-info-11">23/05/1976</h6>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>
                                              <div class="px-2">
                                                <div class="d-flex justify-content-between align-items-center px-2 pt-3">
                                                  <h6 class="d-flex align-items-cente mb-0">
                                                    <i class="fa-solid fa-timeline text-info mr-2"></i>
                                                    <span> Timeline</span>
                                                  </h6>
                                                  <div class="d-flex justify-content-between align-items-cente gap-2">
                                                    <a href="#">
                                                      <i class="fa-solid fa-rotate"></i>
                                                    </a>
                                                    <a href="#">
                                                      <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                    </a>
                                                  </div>
                                                </div>
                                                <div class="w-100 xoverflow-hidden py-3">
                                                  {{ partial "timeline.html" . }}
                                                </div>
                                                <div class="d-flex justify-content-between align-items-center px-2 pt-3">
                                                  <h6 class="d-flex align-items-cente mb-0">
                                                    <i class="fa-solid fa-timeline text-info mr-2"></i>
                                                    <span> Timeline </span>
                                                  </h6>
                                                  <div class="d-flex justify-content-between align-items-cente gap-2">
                                                    <a href="#">
                                                      <i class="fa-solid fa-rotate"></i>
                                                    </a>
                                                    <a href="#">
                                                      <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                    </a>
                                                  </div>
                                                </div>
                                                <div class="w-100 xoverflow-hidden py-3">
                                                  {{ partial "timeline.html" . }}
                                                </div>

                                                <div class="flex-grow-1 card card-main card-main-info mt-3 px-3 py-3">
                                                  <div class="d-flex justify-content-between align-items-center">
                                                    <h6 class="d-flex align-items-cente mb-0">
                                                      <i class="fa-solid fa-bolt text-info mr-2"></i>
                                                      <span> Key Dates </span>
                                                    </h6>
                                                    <div class="d-flex justify-content-between align-items-cente gap-2">
                                                      <a href="#">
                                                        <i class="fa-solid fa-rotate"></i>
                                                      </a>
                                                      <a href="#">
                                                        <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                      </a>
                                                    </div>
                                                  </div>
                                                  <div class="d-flex mt-2 gap-2 py-2">
                                                    <div class="card w-33 d-flex flex-column justify-content-center flex-grow-1 px-2 py-3">
                                                      <p class="mb-0">Last Communication</p>
                                                      <h6 class="text-info-11">23/05/1976</h6>
                                                    </div>
                                                    <div class="card w-33 d-flex flex-column justify-content-center flex-grow-1 px-2 py-3">
                                                      <p class="mb-0">Last Meeting</p>
                                                      <h6 class="text-info-11">23/05/1976</h6>
                                                    </div>
                                                    <div class="card w-33 d-flex flex-column justify-content-center flex-grow-1 px-2 py-3">
                                                      <p class="mb-0">Next Meeting</p>
                                                      <h6 class="text-info-11">23/05/1976</h6>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>

                                              <div class="d-flex gap-2 px-2">
                                                <div class="flex-grow-1 max-w-50 card card-main card-main-info mt-3 px-3 py-3">
                                                  <div class="d-flex justify-content-between align-items-center">
                                                    <h6 class="mb-0">Marketing List</h6>
                                                    <div class="d-flex justify-content-between align-items-cente gap-2">
                                                      <a href="#">
                                                        <i class="fa-solid fa-rotate"></i>
                                                      </a>
                                                      <a href="#">
                                                        <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                      </a>
                                                    </div>
                                                  </div>
                                                  <div>
                                                    <div class="form-group">
                                                      <label for="inputState">Select the marketing list</label>
                                                      <select id="inputState" class="form-control">
                                                        <option selected>Choose...</option>
                                                        <option>...</option>
                                                      </select>
                                                    </div>
                                                    <div class="pb-2">Existing pills</div>
                                                    <div class="d-flex flex-wrap gap-1">
                                                      <a href="#" class="badge badge-primary px-2 py-2">
                                                        primary
                                                        <i class="fa-solid fa-xmark ml-1"></i>
                                                      </a>
                                                      <a href="#" class="badge badge-secondary px-2 py-2">
                                                        secondary
                                                        <i class="fa-solid fa-xmark ml-1"></i>
                                                      </a>
                                                      <a href="#" class="badge badge-brand px-2 py-2">
                                                        brand
                                                        <i class="fa-solid fa-xmark ml-1"></i>
                                                      </a>
                                                      <a href="#" class="badge badge-info px-2 py-2">
                                                        info
                                                        <i class="fa-solid fa-xmark ml-1"></i>
                                                      </a>
                                                      <a href="#" class="badge badge-success px-2 py-2">
                                                        success
                                                        <i class="fa-solid fa-xmark ml-1"></i>
                                                      </a>
                                                      <a href="#" class="badge badge-warning px-2 py-2">
                                                        warning
                                                        <i class="fa-solid fa-xmark ml-1"></i>
                                                      </a>
                                                      <a href="#" class="badge badge-danger px-2 py-2">
                                                        danger
                                                        <i class="fa-solid fa-xmark ml-1"></i>
                                                      </a>
                                                      <a href="#" class="badge badge-soft-primary px-2 py-2">
                                                        soft primary
                                                        <i class="fa-solid fa-xmark ml-1"></i>
                                                      </a>
                                                      <a href="#" class="badge badge-soft-secondary px-2 py-2">
                                                        soft secondary
                                                        <i class="fa-solid fa-xmark ml-1"></i>
                                                      </a>
                                                      <a href="#" class="badge badge-soft-brand px-2 py-2">
                                                        soft brand
                                                        <i class="fa-solid fa-xmark ml-1"></i>
                                                      </a>
                                                      <a href="#" class="badge badge-soft-info px-2 py-2">
                                                        soft info
                                                        <i class="fa-solid fa-xmark ml-1"></i>
                                                      </a>
                                                      <a href="#" class="badge badge-soft-success px-2 py-2">
                                                        soft success
                                                        <i class="fa-solid fa-xmark ml-1"></i>
                                                      </a>
                                                      <a href="#" class="badge badge-soft-warning px-2 py-2">
                                                        soft warning
                                                        <i class="fa-solid fa-xmark ml-1"></i>
                                                      </a>
                                                      <a href="#" class="badge badge-soft-danger px-2 py-2">
                                                        soft danger
                                                        <i class="fa-solid fa-xmark ml-1"></i>
                                                      </a>
                                                    </div>
                                                  </div>
                                                  <hr />
                                                  <div class="d-flex justify-content-end align-items-center gap-2">
                                                    <p class="lead m-0">Can't find one to select from the list?</p>
                                                    <button class="btn btn-primary">Create one</button>
                                                  </div>
                                                </div>
                                                <div class="flex-grow-1 max-w-50 card card-main card-main-info mt-3 px-3 py-3">
                                                  <div class="d-flex justify-content-between align-items-center">
                                                    <h6 class="mb-0">Notes</h6>
                                                    <div class="d-flex justify-content-between align-items-cente gap-2">
                                                      <a href="#">
                                                        <i class="fa-solid fa-rotate"></i>
                                                      </a>
                                                      <a href="#">
                                                        <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                      </a>
                                                    </div>
                                                  </div>
                                                  <div>
                                                    <div class="form-group">
                                                      <label for="inputState">Select the marketing list</label>
                                                      <select id="inputState" class="form-control">
                                                        <option selected>Choose...</option>
                                                        <option>...</option>
                                                      </select>
                                                    </div>
                                                    <div class="pb-2">Existing notes</div>
                                                    <ul class="list-unstyled d-flex flex-column gap-2">
                                                      <li>
                                                        <div class="card bg-soft-info d-flex flex-row p-2">
                                                          <div class="d-flex gap-2">
                                                            <div>
                                                              <div class="bg-info rounded p-3">
                                                                <i class="fa-solid fa-rotate"></i>
                                                              </div>
                                                            </div>
                                                            <p class="mb-0">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Beatae praesentium adipisci sit ut nulla incidunt nisi ipsa doloremque?</p>
                                                          </div>
                                                          <div class="d-flex justify-content-between align-items-cente gap-2">
                                                            <a href="#">
                                                              <i class="fa-solid fa-rotate"></i>
                                                            </a>
                                                            <a href="#">
                                                              <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                            </a>
                                                          </div>
                                                        </div>
                                                      </li>
                                                      <li>
                                                        <div class="card xbg-soft-info d-flex flex-row p-2">
                                                          <div class="d-flex gap-2">
                                                            <div>
                                                              <div class="xbg-info rounded p-3">
                                                                <i class="fa-solid fa-rotate"></i>
                                                              </div>
                                                            </div>
                                                            <p class="mb-0">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Beatae praesentium adipisci sit ut nulla incidunt nisi ipsa doloremque?</p>
                                                          </div>
                                                          <div class="d-flex justify-content-between align-items-cente gap-2">
                                                            <a href="#">
                                                              <i class="fa-solid fa-rotate"></i>
                                                            </a>
                                                            <a href="#">
                                                              <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                            </a>
                                                          </div>
                                                        </div>
                                                      </li>
                                                    </ul>
                                                    <div class="d-flex flex-wrap gap-1"></div>
                                                  </div>
                                                  <hr />
                                                  <div class="d-flex justify-content-end align-items-center gap-2">
                                                    <p class="lead m-0">Can't find one to select from the list?</p>
                                                    <button class="btn btn-primary">Create one</button>
                                                  </div>
                                                </div>
                                              </div>

                                              <div class="d-flex justify-content-between align-items-center px-2 pb-2 pt-3">
                                                <h6 class="mb-0">KYC Information</h6>
                                                <div class="d-flex justify-content-between align-items-cente gap-2">
                                                  <a href="#">
                                                    <i class="fa-solid fa-rotate"></i>
                                                  </a>
                                                  <a href="#">
                                                    <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                  </a>
                                                </div>
                                              </div>
                                              <div class="px-2">
                                                {{ partial "manager/kyc-cards.html" }}
                                              </div>

                                              <div class="d-flex mb-2 gap-2 px-2">
                                                <div class="flex-grow-1 card card-main card-main-info mt-3 px-3 py-3">
                                                  <div class="d-flex justify-content-between align-items-center">
                                                    <h6 class="mb-0">Marketing List</h6>
                                                    <div class="d-flex justify-content-between align-items-cente gap-2">
                                                      <a href="#">
                                                        <i class="fa-solid fa-rotate"></i>
                                                      </a>
                                                      <a href="#">
                                                        <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                                      </a>
                                                    </div>
                                                  </div>
                                                  <div>
                                                    <p>1 Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem, suscipit. Deleniti magnam eaque iure harum optio a ducimus! Excepturi aliquid quas voluptates consequuntur reiciendis amet vero nostrum, est ipsum tempora!</p>
                                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem, suscipit. Deleniti magnam eaque iure harum optio a ducimus! Excepturi aliquid quas voluptates consequuntur reiciendis amet vero nostrum, est ipsum tempora!</p>
                                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem, suscipit. Deleniti magnam eaque iure harum optio a ducimus! Excepturi aliquid quas voluptates consequuntur reiciendis amet vero nostrum, est ipsum tempora!</p>
                                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem, suscipit. Deleniti magnam eaque iure harum optio a ducimus! Excepturi aliquid quas voluptates consequuntur reiciendis amet vero nostrum, est ipsum tempora!</p>
                                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem, suscipit. Deleniti magnam eaque iure harum optio a ducimus! Excepturi aliquid quas voluptates consequuntur reiciendis amet vero nostrum, est ipsum tempora!</p>
                                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem, suscipit. Deleniti magnam eaque iure harum optio a ducimus! Excepturi aliquid quas voluptates consequuntur reiciendis amet vero nostrum, est ipsum tempora!</p>
                                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem, suscipit. Deleniti magnam eaque iure harum optio a ducimus! Excepturi aliquid quas voluptates consequuntur reiciendis amet vero nostrum, est ipsum tempora!</p>
                                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem, suscipit. Deleniti magnam eaque iure harum optio a ducimus! Excepturi aliquid quas voluptates consequuntur reiciendis amet vero nostrum, est ipsum tempora!</p>
                                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem, suscipit. Deleniti magnam eaque iure harum optio a ducimus! Excepturi aliquid quas voluptates consequuntur reiciendis amet vero nostrum, est ipsum tempora!</p>
                                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem, suscipit. Deleniti magnam eaque iure harum optio a ducimus! Excepturi aliquid quas voluptates consequuntur reiciendis amet vero nostrum, est ipsum tempora!</p>
                                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem, suscipit. Deleniti magnam eaque iure harum optio a ducimus! Excepturi aliquid quas voluptates consequuntur reiciendis amet vero nostrum, est ipsum tempora!</p>
                                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem, suscipit. Deleniti magnam eaque iure harum optio a ducimus! Excepturi aliquid quas voluptates consequuntur reiciendis amet vero nostrum, est ipsum tempora!</p>
                                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem, suscipit. Deleniti magnam eaque iure harum optio a ducimus! Excepturi aliquid quas voluptates consequuntur reiciendis amet vero nostrum, est ipsum tempora!</p>
                                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem, suscipit. Deleniti magnam eaque iure harum optio a ducimus! Excepturi aliquid quas voluptates consequuntur reiciendis amet vero nostrum, est ipsum tempora!</p>
                                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem, suscipit. Deleniti magnam eaque iure harum optio a ducimus! Excepturi aliquid quas voluptates consequuntur reiciendis amet vero nostrum, est ipsum tempora!</p>
                                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem, suscipit. Deleniti magnam eaque iure harum optio a ducimus! Excepturi aliquid quas voluptates consequuntur reiciendis amet vero nostrum, est ipsum tempora!</p>
                                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem, suscipit. Deleniti magnam eaque iure harum optio a ducimus! Excepturi aliquid quas voluptates consequuntur reiciendis amet vero nostrum, est ipsum tempora!</p>
                                                  </div>
                                                  <hr />
                                                  <div class="d-flex justify-content-end align-items-center gap-2">
                                                    <p class="lead m-0">Can't find one to select from the list?</p>
                                                    <button class="btn btn-primary">Create one</button>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </section>

                                        <section x-show="isSelected($id('tab', whichChild($el, $el.parentElement)))" :aria-labelledby="$id('tab', whichChild($el, $el.parentElement))" role="tabpanel" class="windowModalTabContent scroll scroll--light  overflow-y-scroll">
                                          <div class="p-2">
                                            <h2 class="text-xl font-bold">Tab 2 Content</h2>
                                            <p class="mt-2 text-gray-500">Fugiat odit alias, eaque optio quas nobis minima reiciendis voluptate dolorem nisi facere debitis ea laboriosam vitae omnis ut voluptatum eos. Fugiat?</p>
                                            <button class="mt-5 rounded-md border border-gray-200 px-4 py-2 text-sm">Something else focusable</button>
                                          </div>
                                        </section>
                                        <section x-show="isSelected($id('tab', whichChild($el, $el.parentElement)))" :aria-labelledby="$id('tab', whichChild($el, $el.parentElement))" role="tabpanel" class="windowModalTabContent scroll scroll--light  overflow-y-scroll">
                                          <div class="p-2">
                                            <h2 class="text-xl font-bold">Tab 3 Content</h2>
                                            <p class="mt-2 text-gray-500">Fugiat odit alias, eaque optio quas nobis minima reiciendis voluptate dolorem nisi facere debitis ea laboriosam vitae omnis ut voluptatum eos. Fugiat?</p>
                                            <button class="mt-5 rounded-md border border-gray-200 px-4 py-2 text-sm">Something else focusable</button>
                                          </div>
                                        </section>
                                      </div>
                                    </div>
                                  </div>
                                </main>
                                <side x-show="windowSideOpen" class="border-left w-auto">
                                  <div class="p-2">
                                    <h2>Side data</h2>
                                  </div>
                                </side>
                              </div>
                            </div>
                          </div>
                        </div>
                        {{/* <div class="d-block screen h-screen w-screen">
                          <div class="backdrop"></div>
                          </div>
                        */}}
                      </template>
                    </template>
                    <template x-teleport="#itemLists">
                      <template x-if="contactSize === '' || contactSize === 'summary'">
                        <div class="d-flex">
                          <div class="d-flex flex-column card-main card-main-soft-primary  m-2 rounded px-3 pb-1 pt-1 shadow" x-bind:class="{ 'bg-white': !minimized, 'bg-primary': minimized }">
                            <div class="d-flex justify-content-between align-items-center w-100">
                              <button x-on:click="contactSize = 'details', minimized = true" class="d-flex align-items-center flex-nowrap border-0 bg-transparent px-1 py-2 " x-bind:class="{ 'text-primary': !minimized, 'text-white': minimized }">
                                <i class="fa-regular fa-arrows-maximize mr-2"></i>
                                {{/* <i class="fa-solid fa-arrow-up-right-from-square mr-2"></i> */}}
                                <strong class="text-nowrap pr-2" x-text="contact.name"> </strong>
                                {{/* <span x-text="contactSize + '-' + show"></span> */}}
                              </button>
                              <div class="d-flex justify-content-between align-items-center">
                                <button class="border-0 bg-transparent py-2" x-on:click="minimized = !minimized" x-bind:class="{ 'text-primary': !minimized, 'text-white': minimized }">
                                  <i x-show="!minimized" class="fa-regular fa-down-left-and-up-right-to-center"></i>
                                  <i x-show="minimized" class="fa-regular fa-arrow-up-right-and-arrow-down-left-from-center"></i>
                                </button>
                                <div class="separator separator__gray mx-2">&nbsp;</div>
                                {{/* <button x-show="contactSize === ''" class="border-0 bg-transparent py-2" x-on:click="contactSize = 'summary'" x-bind:class="{ 'text-primary': contactSize === 'summary', 'text-white': contactSize !== 'summary' }">
                                  <i x-show="!minimized" class="fa-solid fa-down-left-and-up-right-to-center"></i>
                                  <i x-show="minimized" class="fa-solid fa-arrow-up-right-and-arrow-down-left-from-center"></i>
                                  </button>
                                */}}
                                <button class="border-0 bg-transparent py-2" x-on:click="show = false" x-bind:class="{ 'text-primary': !minimized, 'text-white': minimized }"><i class="fa-regular fa-xmark"></i></button>
                              </div>
                            </div>
                            {{/* <span x-text="minimized + contactSize"></span> */}}
                            <div x-show="!minimized">
                              <div class="d-flex flex-column mt-1 gap-1">
                                <div class="card min-w-20rem p-3">
                                  <dl class="d-flex mb-0 gap-1">
                                    <dt class="w-50">Name</dt>
                                    <dd class="w-50 mb-0" x-text="contact.name"></dd>
                                  </dl>
                                  <dl class="d-flex mb-0 gap-1">
                                    <dt class="w-50">Contact Type</dt>
                                    <dd class="w-50 mb-0" x-text="contact.contactType"></dd>
                                  </dl>
                                </div>
                                <div class="card min-w-20rem p-3">
                                  <dl class="d-flex mb-0 gap-1">
                                    <dt class="w-50">Last FTF meeting</dt>
                                    <dd class="w-50 mb-0" x-text="contact.lastFTFmeeting"></dd>
                                  </dl>
                                  <dl class="d-flex mb-0 gap-1">
                                    <dt class="w-50">Stage</dt>
                                    <dd class="w-50 mb-0" x-text="contact.stage"></dd>
                                  </dl>
                                  <dl class="d-flex mb-0 gap-1">
                                    <dt class="w-50">Assets</dt>
                                    <dd class="w-50 mb-0" x-text="contact.assets"></dd>
                                  </dl>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </template>
                    </template>
                  </div>
                </template>
              </td>

              <td class="align-middle" x-text="contact.contactType"></td>
              <td class="align-middle" x-text="contact.lastContacted"></td>
              <td class="align-middle" x-text="contact.lastFTFmeeting"></td>
              <td class="align-middle" x-text="contact.stage"></td>
              <td class="text-right align-middle" x-text="' ' + contact.assets"></td>
              <td class="text-right align-middle">
                <button class="btn btn-sm btn-link" x-on:click="contactSize = 'details' , show = true">
                  <i class="fa-solid fa-arrow-up-right-from-square"></i>
                </button>
                <button class="btn btn-sm btn-link">
                  <i class="fa-solid fa-ellipsis-vertical"></i>
                </button>
              </td>
            </tr>
          </template>
        </tbody>
      </table>

      <script>
        function calculateColumnWidths() {
          var table = document.getElementById("myTable");
          if (!table) return;

          var headers = table.getElementsByTagName("th");
          var columnWidths = JSON.parse(localStorage.getItem("columnWidths")) || {};

          for (var i = 0; i < headers.length; i++) {
            var header = headers[i];
            var key = header.getAttribute("data-column");
            if (!key) continue;

            var width = columnWidths[key];
            if (width) {
              header.style.width = width;
            } else {
              var clientWidth = header.clientWidth;
              header.style.width = clientWidth + "px";
              columnWidths[key] = clientWidth + "px";
            }
          }

          localStorage.setItem("columnWidths", JSON.stringify(columnWidths));
        }

        // Alpine.start();
      </script>
    </div>
    <div class="shadow-top p-2">
      <nav aria-label="Page navigation example">
        <ul class="pagination pagination-sm mb-0">
          <li class="page-item">
            <a class="page-link" href="#" aria-label="Previous">
              <span aria-hidden="true">
                <i class="fa-solid fa-chevron-left"></i>
              </span>
            </a>
          </li>
          <li class="page-item"><a class="page-link" href="#">1</a></li>
          <li class="page-item active">
            <a class="page-link" href="#" aria-current="page">2 <span class="sr-only">(current)</span></a>
          </li>
          <li class="page-item"><a class="page-link" href="#">3</a></li>
          <li class="page-item">
            <a class="page-link" href="#" aria-label="Next">
              <span aria-hidden="true">
                <i class="fa-solid fa-chevron-right"></i>
              </span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>
