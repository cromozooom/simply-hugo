{{/* <div>
  <div class="flex items-center justify-between percentage">
  <div class="px-3">
  <p class="font-bold">Commodities</p>
  <p class="text-brand-400">Winton Commodity Fund</p>
  </div>
  <div class="relative flex items-center justify-center percentage--circle">
  <svg class="rotate-[-90deg]" style="--percentage: 40">
  <circle class="text-brand-300" cx="25" cy="25" r="25"></circle>
  <circle class="text-green-300" cx="25" cy="25" r="25"></circle>
  </svg>
  <div class="flex items-center justify-center text-sm percentage--value">
  40%
  </div>
  </div>
  </div>
  </div>
  */}}

{{/* https://codepen.io/QJan84/pen/zYvRMMw */}}


<div class="w-full" x-data="{ selected: 0 }">
  <div class="mx-auto w-full sm:max-w-[640px] md:max-w-[768px] lg:max-w-[1024px] xl:max-w-[1280px] 2xl:max-w-[1536px]">
    {{ range $indexUser, $user := $.Site.Data.users.users }}
      <div class="users dark:bg-darkNeutral-800 mx-3 mb-6 rounded-md bg-white shadow-md shadow-neutral-200/30 dark:shadow-neutral-900/50 sm:mx-0">
        <div class="users--head dark:border-b-darkNeutral-800 grid w-full grid-cols-[1fr] grid-rows-[auto] border-b sm:grid-cols-[1fr_1fr] sm:border-b-0 lg:grid-cols-[14rem_minmax(14rem,_1fr)_minmax(16rem,_1fr)_4.5rem] xl:grid-cols-[14rem_minmax(14rem,_1fr)_minmax(42rem,_1fr)_4.5rem] 2xl:grid-cols-[14rem_minmax(14rem,_1fr)_minmax(45rem,_1fr)_4.5rem]">
          <div class="users--primaryInfo dark:md:border-b-darkNeutral-800 dark:sm:border-b-darkNeutral-800 dark:md:border-b-darkneutral-800 flex h-full items-center justify-center py-3 pl-4 pr-4 text-center sm:justify-start sm:border-b sm:text-left md:border-b md:pb-3 lg:border-0 lg:pb-4 xl:justify-start ">
            <div>
              <div class="text-brand-400 dark:text-darkNeutral-100 text-xl sm:text-base">
                {{ .name }}
                {{/* <strong x-text="selected"></strong> */}}
              </div>
              <div class="text-brand-700 dark:text-darkNeutral-100 text-2xl font-bold sm:text-xl">
                {{ .val }}
              </div>
            </div>
          </div>
          <div class="users--secondaryInfo dark:md:border-b-darkNeutral-800 dark:sm:border-b-darkNeutral-800 dark:md:border-b-darkneutral-800 flex h-full items-center justify-center py-3 pr-4 text-center sm:justify-end sm:border-b sm:text-right md:border-b md:pb-3 lg:justify-start lg:border-0 lg:pb-4 lg:text-left">
            <div>
              <div class="text-brand-600 dark:text-darkNeutral-100">
                client since
                {{ .since }}
              </div>
              <div>
                <span class="text-brand-400 dark:text-darkNeutral-300">
                  {{ .agent.name }}
                </span>
                <span class="text-brand-400 dark:text-darkNeutral-200 text-sm italic">({{ .agent.position }})</span>
              </div>
            </div>
          </div>
          <div class="users--notifications col-[1_/_-1] grid w-full grid-cols-3 py-4 lg:col-[3_/_4] lg:row-[1_/_2]">
            {{ range $index, $notification := .notifications }}
              <div class="flex flex-col items-center lg:justify-center xl:flex-row xl:justify-center">
                <div class="dark:bg-darkNeutral-700/20 relative h-[3.6rem] w-[3.6rem] min-w-[3.6rem] rounded-full bg-neutral-50/80">
                  {{ if eq .icon "cube" }}
                    <i class="fas fa-cubes dark:text-darkNeutral-500/50 absolute left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%] text-2xl text-neutral-500"></i>
                  {{ else if eq .icon "folder" }}
                    <i class="fas fa-folder-open dark:text-darkNeutral-500/50 absolute left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%] text-2xl text-neutral-500"></i>
                  {{ else if eq .icon "bell" }}
                    <i class="fas fa-bell dark:text-darkNeutral-500/50 absolute left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%] text-2xl text-neutral-500"></i>
                  {{ end }}


                  <span
                    class="
                      {{ if eq .title "Notifications" }}
                      bg-red-500 text-white dark:bg-red-500 dark:text-white
                    {{ else }}
                      bg-brand-500 dark:bg-brand-700 text-white dark:text-brand-100
                    {{ end }}
                     absolute top-[-.2rem] right-[-.5rem] flex h-[1.5rem] w-[1.5rem] items-center justify-center rounded-full text-sm"
                  >
                    {{ .count }}
                  </span>
                </div>
                <div class="w-full grow px-4 pl-3 text-center text-sm opacity-70 dark:text-white xl:text-left">
                  {{ .title }}
                </div>
              </div>
            {{ end }}
          </div>
          <div class="users--mainCta .row-[2_/_3] xmd:row-[3_/_4] md:border-b-darkNeutral-800 col-[1_/_-1] flex items-center justify-center lg:col-[4_/_5] lg:items-start lg:justify-center lg:border-b-0 lg:py-4 lg:pr-3 lg:pb-4">
            <button
              @click="selected !== {{ $indexUser }} ? selected = {{ $indexUser }}
               : selected = null"
              class="lg:bg-brand-100/50 dark:lg:bg-brand-500/20 w-full items-center justify-center overflow-hidden lg:flex lg:h-[3.6rem] lg:w-[3.6rem] lg:rounded-full"
              :class="selected != {{ $indexUser }} ? '' : 'hidden'"
            >
              <i class="fas fa-angle-down text-brand-500 dark:text-brand-400 text-2xl transition-all duration-300" :class="selected == {{ $indexUser }} ? 'rotate-180' : ''"></i>
            </button>
          </div>
        </div>
        <div class="users--body relative max-h-0 overflow-hidden rounded-b-md transition-all duration-300" x-ref="container{{ $indexUser }}" x-bind:style="selected == {{ $indexUser }} ? 'max-height: ' + $refs.container{{ $indexUser }}.scrollHeight + 'px' : ''">
          <div class="users--details grid h-full w-full grid-rows-[auto] sm:grid-cols-1 lg:grid-cols-[.7fr_.3fr] xl:grid-cols-[.7fr_.3fr]">
            <div class="col-[1_/_-1] lg:col-[1_/_2]">
              {{ range $index, $services := .services }}
                <div class="dark:hover:bg-darkNeutral-800/30 dark:border-b-darkNeutral-800 flex flex-col justify-between border-b last:border-0 hover:bg-neutral-100/30 md:flex-row">
                  <div class="body--primaryInfo grow px-4 pt-4">
                    <div class="flex gap-4">
                      {{ range $index, $services := .services }}
                        <div class="text-brand-800 dark:text-darkNeutral-100 font-bold">
                          {{ .name }}
                        </div>
                      {{ end }}
                    </div>
                    <div class="flex gap-4 py-6 md:py-3">
                      <span class="dark:text-darkNeutral-400 font-bold text-neutral-400">
                        {{ .assets }}
                      </span>

                      <div>
                        <span class="text-brand-800 dark:text-darkNeutral-300">
                          {{ .agent.name }}
                        </span>
                        <span class="text-brand-400 dark:text-darkNeutral-200 text-sm italic">({{ .agent.position }})</span>
                      </div>
                    </div>
                    <div class="flex pb-4">
                      {{ range $index, $updates := .updates }}
                        <div class="mr-4 flex flex-col">
                          <div class="dark:text-darkNeutral-300 text-sm text-neutral-500">
                            {{ .timeFrame }}
                          </div>
                          <div class="flex items-center pt-3 text-neutral-600 dark:text-white">
                            {{ partial "font-awsome.html" ( dict "icon" "arrow-alt-circle-up" "type" "far" "class" "mr-2 flex text-xl text-green-400") }}
                            {{ .change }}
                          </div>
                        </div>
                      {{ end }}
                    </div>
                  </div>
                  <div class="body--secondaryInfo bg-brand-50 flex grow justify-between px-4 py-3 text-neutral-500 md:bg-transparent md:py-4 lg:justify-end ">
                    <div class="flex">
                      <span class="pr-2">{{ .since }}</span>
                      {{ if eq .active true }}
                        <span>
                          <span class="flex items-center rounded-md bg-green-100/50 px-2 text-green-500 dark:bg-green-500/20 dark:text-green-500"> Active </span>
                        </span>
                      {{ else if eq .active false }}
                        <span>
                          <span class="flex items-center rounded-md bg-red-100/50 px-2 text-red-500 dark:bg-red-500/20 dark:text-red-300"> Inactive </span>
                        </span>
                      {{ end }}
                    </div>
                    <a class="text-brand-700 dark:text-brand-400 px-0 underline md:px-2">More</a>
                  </div>
                </div>
              {{ end }}
            </div>
            <div class="dark:bg-darkNeutral-900/50 bg-neutral-700 p-4 text-white lg:col-[2_/_3]">
              <div class="px-3">Recommadations</div>
              <div>
                {{ range $indexRecommadation,  $recommadation := .recommandations }}
                  <div class="percentage flex items-center justify-between py-3">
                    <div class="px-3">
                      <p class="font-bold text-neutral-400">{{ .title }}</p>
                      <p class="text-neutral-100">
                        {{ .description }}
                      </p>
                    </div>
                    <div class="percentage--circle relative flex items-center justify-center">
                      <svg class="rotate-[-90deg]" style="--percentage: {{ .value }}">
                        <circle class="text-green-300 dark:text-green-500/50" cx="25" cy="25" r="25"></circle>
                        <circle class="text-green-300 dark:text-green-500" cx="25" cy="25" r="25"></circle>
                      </svg>
                      <div class="percentage--value flex items-center justify-center text-sm">{{ .value }}%</div>
                    </div>
                  </div>
                {{ end }}

              </div>
            </div>
          </div>
        </div>
        <button @click="selected !== {{ $indexUser }} ? selected = {{ $indexUser }} : selected = null" :class="selected == {{ $indexUser }} ? '' : 'hidden'" class="lg:bg-brand-45 flex w-full items-center justify-center lg:hidden">
          <i class="fas fa-angle-down text-brand-700 rotate-180 text-2xl"></i>
        </button>
      </div>
    {{ end }}
  </div>
</div>
